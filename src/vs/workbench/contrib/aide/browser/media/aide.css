/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* ============================================================================
 * Composer Widget
 * ============================================================================ */

.aide-composer {
	display: flex;
	flex-direction: column;
	height: 100%;
	background-color: var(--vscode-editor-background);
	color: var(--vscode-editor-foreground);
}

.aide-composer-header {
	display: flex;
	align-items: center;
	gap: 16px;
	padding: 8px 12px;
	border-bottom: 1px solid var(--vscode-panel-border);
	background-color: var(--vscode-sideBar-background);
}

.aide-composer-mode,
.aide-composer-model {
	display: flex;
	align-items: center;
	gap: 8px;
}

.aide-composer-mode .label,
.aide-composer-model .label {
	font-size: 12px;
	color: var(--vscode-descriptionForeground);
}

/* ============================================================================
 * Messages List
 * ============================================================================ */

.aide-composer-messages {
	flex: 1;
	overflow-y: auto;
	padding: 12px;
}

.aide-message {
	margin-bottom: 16px;
	padding: 12px;
	border-radius: 8px;
}

.aide-message-user {
	background-color: var(--vscode-input-background);
	margin-left: 24px;
}

.aide-message-assistant {
	background-color: var(--vscode-editor-inactiveSelectionBackground);
	margin-right: 24px;
}

.aide-message-system {
	background-color: var(--vscode-editorWidget-background);
	font-style: italic;
	opacity: 0.8;
}

.aide-message-role {
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--vscode-descriptionForeground);
	margin-bottom: 4px;
}

.aide-message-content {
	font-size: 13px;
	line-height: 1.5;
	white-space: pre-wrap;
	word-break: break-word;
}

.aide-message-content.streaming::after {
	content: 'â–‹';
	animation: blink 1s step-end infinite;
}

@keyframes blink {
	50% { opacity: 0; }
}

.aide-message-attachments {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
	margin-top: 8px;
}

/* ============================================================================
 * Attachments
 * ============================================================================ */

.aide-composer-attachments {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
	padding: 8px 12px;
	min-height: 0;
}

.aide-composer-attachments:empty {
	display: none;
}

.aide-attachment-chip {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 4px 8px;
	background-color: var(--vscode-badge-background);
	color: var(--vscode-badge-foreground);
	border-radius: 12px;
	font-size: 11px;
	max-width: 200px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.aide-attachment-chip .remove {
	cursor: pointer;
	opacity: 0.7;
	margin-left: 2px;
}

.aide-attachment-chip .remove:hover {
	opacity: 1;
}

/* ============================================================================
 * Input Area
 * ============================================================================ */

.aide-composer-input {
	display: flex;
	flex-direction: column;
	padding: 12px;
	border-top: 1px solid var(--vscode-panel-border);
	background-color: var(--vscode-sideBar-background);
}

.aide-input-buttons {
	display: flex;
	gap: 4px;
	margin-bottom: 8px;
}

.aide-button {
	padding: 4px 8px;
	background-color: var(--vscode-button-secondaryBackground);
	color: var(--vscode-button-secondaryForeground);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
}

.aide-button:hover {
	background-color: var(--vscode-button-secondaryHoverBackground);
}

.aide-input-wrapper {
	display: flex;
	gap: 8px;
	align-items: flex-end;
}

.aide-input-wrapper .monaco-inputbox {
	flex: 1;
}

.aide-send-button {
	padding: 8px 16px !important;
	background-color: var(--vscode-button-background) !important;
	color: var(--vscode-button-foreground) !important;
	border: none !important;
	border-radius: 4px !important;
	cursor: pointer !important;
	font-size: 13px !important;
}

.aide-send-button:hover {
	background-color: var(--vscode-button-hoverBackground) !important;
}

/* ============================================================================
 * Agent Sidebar
 * ============================================================================ */

.aide-agent-sidebar {
	display: flex;
	flex-direction: column;
	height: 100%;
	background-color: var(--vscode-sideBar-background);
	color: var(--vscode-sideBar-foreground);
}

.aide-agent-search {
	padding: 8px 12px;
	border-bottom: 1px solid var(--vscode-panel-border);
}

.aide-agent-new {
	padding: 8px 12px;
}

.aide-new-agent-button {
	width: 100%;
	padding: 8px 16px !important;
	background-color: var(--vscode-button-background) !important;
	color: var(--vscode-button-foreground) !important;
	border: none !important;
	border-radius: 4px !important;
	cursor: pointer !important;
	font-size: 13px !important;
	text-align: center !important;
}

.aide-new-agent-button:hover {
	background-color: var(--vscode-button-hoverBackground) !important;
}

.aide-agent-list-header {
	padding: 8px 12px;
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--vscode-sideBarSectionHeader-foreground);
	background-color: var(--vscode-sideBarSectionHeader-background);
}

.aide-agent-list {
	flex: 1;
	overflow-y: auto;
}

.aide-agent-item {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 10px 12px;
	cursor: pointer;
	border-bottom: 1px solid var(--vscode-list-hoverBackground);
}

.aide-agent-item:hover {
	background-color: var(--vscode-list-hoverBackground);
}

.aide-agent-item.active {
	background-color: var(--vscode-list-activeSelectionBackground);
	color: var(--vscode-list-activeSelectionForeground);
}

.aide-agent-icon {
	width: 24px;
	height: 24px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 14px;
	background-color: var(--vscode-badge-background);
	color: var(--vscode-badge-foreground);
	border-radius: 50%;
}

.aide-agent-details {
	flex: 1;
	min-width: 0;
}

.aide-agent-name {
	font-size: 13px;
	font-weight: 500;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.aide-agent-time {
	font-size: 11px;
	color: var(--vscode-descriptionForeground);
}

/* ============================================================================
 * Ghost Text (Tab Completion)
 * ============================================================================ */

.aide-ghost-text {
	color: var(--vscode-editorGhostText-foreground);
	font-style: italic;
	opacity: 0.6;
}

/* ============================================================================
 * Inline Edit Widget
 * ============================================================================ */

.aide-inline-edit {
	background-color: var(--vscode-editorWidget-background);
	border: 1px solid var(--vscode-editorWidget-border);
	border-radius: 4px;
	box-shadow: 0 2px 8px var(--vscode-widget-shadow);
	padding: 8px;
	max-width: 500px;
}

.aide-inline-edit-input {
	margin-bottom: 8px;
}

.aide-inline-edit-actions {
	display: flex;
	justify-content: flex-end;
	gap: 8px;
}

/* ============================================================================
 * Diff Preview
 * ============================================================================ */

.aide-diff-preview {
	margin: 8px 0;
	border-radius: 4px;
	overflow: hidden;
	font-family: var(--vscode-editor-font-family);
	font-size: var(--vscode-editor-font-size);
}

.aide-diff-line {
	padding: 2px 8px;
	white-space: pre;
}

.aide-diff-line.added {
	background-color: var(--vscode-diffEditor-insertedTextBackground);
}

.aide-diff-line.removed {
	background-color: var(--vscode-diffEditor-removedTextBackground);
	text-decoration: line-through;
	opacity: 0.7;
}

.aide-diff-line.unchanged {
	opacity: 0.6;
}
